## Test 12: IO redirection [1 pts]

This test writes several strings to files and ensures their results are
correct using both input and output redirection. It also checks to make sure
the permissions are set up correctly with open() -- use 0666.

```

# ---------- Test Script ----------
echo "${script}"
rm -f /home/skuan/first-day/P3-marcus0329/.testlib/../tests/final_output.txt
rm -f /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile1 /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile2 /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile3 /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile4

echo Hello world this is a nice long message to save to a file > /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile1
cat /etc/passwd > /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile2
echo And here is another message saved to a different file > /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile3

sort -- < /etc/passwd > /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile4
sort -- >> /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile4 < /proc/sys/kernel/hostname
echo We just printed the password file in sorted >> /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile4
echo order followed by hostname. >> /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile4

echo This will overwrite the first message > /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile1
echo But this message will not overwrite >> /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile3
echo In fact, it will append >> /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile3

cat /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile1 /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile2 /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile3 /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile4 > /home/skuan/first-day/P3-marcus0329/.testlib/../tests/final_output.txt
cat /home/skuan/first-day/P3-marcus0329/.testlib/../tests/final_output.txt

/home/skuan/first-day/P3-marcus0329/.testlib/../tests/inputs/scripts/get-stats.sh /home/skuan/first-day/P3-marcus0329/.testlib/../tests/final_output.txt

rm -f /home/skuan/first-day/P3-marcus0329/.testlib/../tests/final_output.txt
rm -f /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile1 /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile2 /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile3 /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile4
# -------------- End --------------

run ./$SHELL_NAME < <(echo "${script}")
shshsh.c:329:main(): Input command: rm -f /home/skuan/first-day/P3-marcus0329/.testlib/../tests/final_output.txt
shshsh.c:329:main(): Input command: rm -f /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile1 /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile2 /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile3 /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile4
shshsh.c:329:main(): Input command: echo Hello world this is a nice long message to save to a file > /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile1
shshsh.c:224:execute_pipeline(): redirection: echo
shshsh.c:263:execute_pipeline(): pipe: echo
shshsh.c:329:main(): Input command: cat /etc/passwd > /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile2
shshsh.c:224:execute_pipeline(): redirection: cat
shshsh.c:263:execute_pipeline(): pipe: cat
shshsh.c:329:main(): Input command: echo And here is another message saved to a different file > /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile3
shshsh.c:224:execute_pipeline(): redirection: echo
shshsh.c:263:execute_pipeline(): pipe: echo
shshsh.c:329:main(): Input command: sort -- < /etc/passwd > /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile4
shshsh.c:216:execute_pipeline(): redirection: sort
shshsh.c:224:execute_pipeline(): redirection: sort
shshsh.c:263:execute_pipeline(): pipe: sort
shshsh.c:329:main(): Input command: sort -- >> /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile4 < /proc/sys/kernel/hostname
shshsh.c:220:execute_pipeline(): redirection: sort
shshsh.c:216:execute_pipeline(): redirection: sort
shshsh.c:263:execute_pipeline(): pipe: sort
shshsh.c:329:main(): Input command: echo We just printed the password file in sorted >> /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile4
shshsh.c:220:execute_pipeline(): redirection: echo
shshsh.c:263:execute_pipeline(): pipe: echo
shshsh.c:329:main(): Input command: echo order followed by hostname. >> /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile4
shshsh.c:220:execute_pipeline(): redirection: echo
shshsh.c:263:execute_pipeline(): pipe: echo
shshsh.c:329:main(): Input command: echo This will overwrite the first message > /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile1
shshsh.c:224:execute_pipeline(): redirection: echo
shshsh.c:263:execute_pipeline(): pipe: echo
shshsh.c:329:main(): Input command: echo But this message will not overwrite >> /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile3
shshsh.c:220:execute_pipeline(): redirection: echo
shshsh.c:263:execute_pipeline(): pipe: echo
shshsh.c:329:main(): Input command: echo In fact, it will append >> /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile3
shshsh.c:220:execute_pipeline(): redirection: echo
shshsh.c:263:execute_pipeline(): pipe: echo
shshsh.c:329:main(): Input command: cat /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile1 /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile2 /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile3 /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile4 > /home/skuan/first-day/P3-marcus0329/.testlib/../tests/final_output.txt
shshsh.c:224:execute_pipeline(): redirection: cat
shshsh.c:263:execute_pipeline(): pipe: cat
shshsh.c:329:main(): Input command: cat /home/skuan/first-day/P3-marcus0329/.testlib/../tests/final_output.txt
shshsh.c:329:main(): Input command: /home/skuan/first-day/P3-marcus0329/.testlib/../tests/inputs/scripts/get-stats.sh /home/skuan/first-day/P3-marcus0329/.testlib/../tests/final_output.txt
shshsh.c:329:main(): Input command: rm -f /home/skuan/first-day/P3-marcus0329/.testlib/../tests/final_output.txt
shshsh.c:329:main(): Input command: rm -f /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile1 /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile2 /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile3 /home/skuan/first-day/P3-marcus0329/.testlib/../tests/testfile4
getline: Inappropriate ioctl for device

compare_outputs

Expected Program Output                                                    | Actual Program Output
---------------------------------------------------------------------------V--------------------------------------------------------------------------
This will overwrite the first message                                        This will overwrite the first message
                                                                           > e to save to a file
root:x:0:0::/root:/bin/bash                                                  root:x:0:0::/root:/bin/bash
bin:x:1:1::/:/usr/bin/nologin                                                bin:x:1:1::/:/usr/bin/nologin
daemon:x:2:2::/:/usr/bin/nologin                                             daemon:x:2:2::/:/usr/bin/nologin
mail:x:8:12::/var/spool/mail:/usr/bin/nologin                                mail:x:8:12::/var/spool/mail:/usr/bin/nologin
ftp:x:14:11::/srv/ftp:/usr/bin/nologin                                       ftp:x:14:11::/srv/ftp:/usr/bin/nologin
http:x:33:33::/srv/http:/usr/bin/nologin                                     http:x:33:33::/srv/http:/usr/bin/nologin
nobody:x:65534:65534:Kernel Overflow User:/:/usr/bin/nologin                 nobody:x:65534:65534:Kernel Overflow User:/:/usr/bin/nologin
dbus:x:81:81:System Message Bus:/:/usr/bin/nologin                           dbus:x:81:81:System Message Bus:/:/usr/bin/nologin
systemd-coredump:x:981:981:systemd Core Dumper:/:/usr/bin/nologin            systemd-coredump:x:981:981:systemd Core Dumper:/:/usr/bin/nologin
systemd-network:x:980:980:systemd Network Management:/:/usr/bin/nologin      systemd-network:x:980:980:systemd Network Management:/:/usr/bin/nologin
systemd-oom:x:979:979:systemd Userspace OOM Killer:/:/usr/bin/nologin        systemd-oom:x:979:979:systemd Userspace OOM Killer:/:/usr/bin/nologin
systemd-journal-remote:x:978:978:systemd Journal Remote:/:/usr/bin/nologin   systemd-journal-remote:x:978:978:systemd Journal Remote:/:/usr/bin/nologin
systemd-resolve:x:977:977:systemd Resolver:/:/usr/bin/nologin                systemd-resolve:x:977:977:systemd Resolver:/:/usr/bin/nologin
systemd-timesync:x:976:976:systemd Time Synchronization:/:/usr/bin/nologin   systemd-timesync:x:976:976:systemd Time Synchronization:/:/usr/bin/nologin
tss:x:975:975:tss user for tpm2:/:/usr/bin/nologin                           tss:x:975:975:tss user for tpm2:/:/usr/bin/nologin
uuidd:x:68:68::/:/usr/bin/nologin                                            uuidd:x:68:68::/:/usr/bin/nologin
dhcpcd:x:974:974:dhcpcd privilege separation:/:/usr/bin/nologin              dhcpcd:x:974:974:dhcpcd privilege separation:/:/usr/bin/nologin
git:x:973:973:git daemon user:/:/usr/bin/git-shell                           git:x:973:973:git daemon user:/:/usr/bin/git-shell
avahi:x:972:972:Avahi mDNS/DNS-SD daemon:/:/usr/bin/nologin                  avahi:x:972:972:Avahi mDNS/DNS-SD daemon:/:/usr/bin/nologin
skuan:x:1000:998::/home/skuan:/bin/bash                                      skuan:x:1000:998::/home/skuan:/bin/bash
And here is another message saved to a different file                        And here is another message saved to a different file
But this message will not overwrite                                          But this message will not overwrite
In fact, it will append                                                      In fact, it will append
avahi:x:972:972:Avahi mDNS/DNS-SD daemon:/:/usr/bin/nologin                  avahi:x:972:972:Avahi mDNS/DNS-SD daemon:/:/usr/bin/nologin
bin:x:1:1::/:/usr/bin/nologin                                                bin:x:1:1::/:/usr/bin/nologin
daemon:x:2:2::/:/usr/bin/nologin                                             daemon:x:2:2::/:/usr/bin/nologin
dbus:x:81:81:System Message Bus:/:/usr/bin/nologin                           dbus:x:81:81:System Message Bus:/:/usr/bin/nologin
dhcpcd:x:974:974:dhcpcd privilege separation:/:/usr/bin/nologin              dhcpcd:x:974:974:dhcpcd privilege separation:/:/usr/bin/nologin
ftp:x:14:11::/srv/ftp:/usr/bin/nologin                                       ftp:x:14:11::/srv/ftp:/usr/bin/nologin
git:x:973:973:git daemon user:/:/usr/bin/git-shell                           git:x:973:973:git daemon user:/:/usr/bin/git-shell
http:x:33:33::/srv/http:/usr/bin/nologin                                     http:x:33:33::/srv/http:/usr/bin/nologin
mail:x:8:12::/var/spool/mail:/usr/bin/nologin                                mail:x:8:12::/var/spool/mail:/usr/bin/nologin
nobody:x:65534:65534:Kernel Overflow User:/:/usr/bin/nologin                 nobody:x:65534:65534:Kernel Overflow User:/:/usr/bin/nologin
root:x:0:0::/root:/bin/bash                                                  root:x:0:0::/root:/bin/bash
skuan:x:1000:998::/home/skuan:/bin/bash                                      skuan:x:1000:998::/home/skuan:/bin/bash
systemd-coredump:x:981:981:systemd Core Dumper:/:/usr/bin/nologin            systemd-coredump:x:981:981:systemd Core Dumper:/:/usr/bin/nologin
systemd-journal-remote:x:978:978:systemd Journal Remote:/:/usr/bin/nologin   systemd-journal-remote:x:978:978:systemd Journal Remote:/:/usr/bin/nologin
systemd-network:x:980:980:systemd Network Management:/:/usr/bin/nologin      systemd-network:x:980:980:systemd Network Management:/:/usr/bin/nologin
systemd-oom:x:979:979:systemd Userspace OOM Killer:/:/usr/bin/nologin        systemd-oom:x:979:979:systemd Userspace OOM Killer:/:/usr/bin/nologin
systemd-resolve:x:977:977:systemd Resolver:/:/usr/bin/nologin                systemd-resolve:x:977:977:systemd Resolver:/:/usr/bin/nologin
systemd-timesync:x:976:976:systemd Time Synchronization:/:/usr/bin/nologin   systemd-timesync:x:976:976:systemd Time Synchronization:/:/usr/bin/nologin
tss:x:975:975:tss user for tpm2:/:/usr/bin/nologin                           tss:x:975:975:tss user for tpm2:/:/usr/bin/nologin
uuidd:x:68:68::/:/usr/bin/nologin                                            uuidd:x:68:68::/:/usr/bin/nologin
skuan-vm                                                                     skuan-vm
We just printed the password file in sorted                                  We just printed the password file in sorted
order followed by hostname.                                                  order followed by hostname.
skuan  wheel  2331  644                                                    | skuan  wheel  2351  644
---------------------------------------------------------------------------^--------------------------------------------------------------------------
 --> FAIL

test_end
 --> Test failed (1)
```

